(this["webpackJsonpmesto-react"]=this["webpackJsonpmesto-react"]||[]).push([[0],{32:function(e,t,n){},39:function(e,t,n){"use strict";n.r(t);var a=n(1),s=n.n(a),c=n(24),i=n.n(c),r=n(8),o=(n(32),n(22)),u=n(3),l=s.a.createContext(),d=n(2),p=n.p+"static/media/header_logo.abb64ac9.svg",b=n(0);function j(e){return Object(b.jsx)("button",{className:"header__user-exit",onClick:e.onSignOut,children:"\u0412\u044b\u0439\u0442\u0438"})}var h=function(e){return Object(b.jsxs)("header",{className:"header",children:[Object(b.jsx)("a",{className:"header__link",target:"_blank",href:"#",children:Object(b.jsx)("img",{className:"header__logo",src:p,alt:"\u041b\u043e\u0433\u043e\u0442\u0438\u043f"})}),Object(b.jsx)("div",{className:"header__user",children:Object(b.jsxs)(d.d,{children:[Object(b.jsxs)(d.b,{exact:!0,path:"/",children:[Object(b.jsx)("p",{className:"header__user-email",children:e.email}),Object(b.jsx)(j,{onSignOut:e.onSignOut,children:"\u0412\u044b\u0439\u0442\u0438"})]}),Object(b.jsx)(d.b,{path:"/sign-up",children:Object(b.jsx)(r.b,{to:"/sign-in",className:"header__user-exit",children:"\u0412\u043e\u0439\u0442\u0438"})}),Object(b.jsx)(d.b,{path:"/sign-in",children:Object(b.jsx)(r.b,{to:"/sign-up",className:"header__user-exit",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"})})]})})]})};var m=function(e){return Object(b.jsx)("section",{className:"popup ".concat(e.isOpen?"popup_active":""),children:Object(b.jsxs)("div",{className:"popup__container popup__container_info",children:[Object(b.jsx)("img",{className:"popup__image_info",src:e.isSuccess?"data:image/png;base64,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":"data:image/png;base64,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",alt:e.isSuccess?"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f \u0443\u0441\u043f\u0435\u0448\u043d\u0430":"\u041e\u0448\u0438\u0431\u043a\u0430 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438"}),Object(b.jsx)("h2",{className:"popup__heading popup__heading_info",children:e.isSuccess?"\u0412\u044b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043b\u0438\u0441\u044c!":"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a! \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0451 \u0440\u0430\u0437."}),Object(b.jsx)("button",{className:"popup__close",type:"button",onClick:e.onClose})]})})};var g=function(e){var t=e.onCardClick,n=e.card,a=e.onCardDelete,c=e.onCardLike,i=s.a.useContext(l),r=n.owner._id===i._id,o="photo-grid__delete ".concat(r?"photo-grid__delete_visible":""),u=n.likes.some((function(e){return e._id===i._id})),d="photo-grid__like ".concat(u?"photo-grid__like-active":"");return Object(b.jsxs)("li",{className:"photo-grid__item",children:[Object(b.jsx)("div",{onClick:function(){t(n)},className:"photo-grid__image",style:{backgroundImage:"url(".concat(n.link,")")}}),Object(b.jsx)("h2",{className:"photo-grid__title",children:n.name}),Object(b.jsxs)("div",{children:[Object(b.jsx)("button",{className:d,type:"button",onClick:function(){c(n)}}),Object(b.jsx)("p",{className:"photo-grid__like-count",children:n.likes.length})]}),Object(b.jsx)("button",{className:o,type:"button",onClick:function(){a(n)}})]})};var O=function(e){var t=e.cards,n=e.onCardLike,a=e.onCardDelete,c=e.onEditProfile,i=e.onAddPlace,r=e.onEditAvatar,o=e.onCardClick,u=s.a.useContext(l);return Object(b.jsxs)("main",{className:"content",children:[Object(b.jsxs)("section",{className:"profile",children:[Object(b.jsx)("button",{className:"profile__avatar",style:{backgroundImage:"url(".concat(u.avatar,")")},type:"button",children:Object(b.jsx)("div",{className:"profile__avatar-edit",onClick:r})}),Object(b.jsxs)("div",{className:"profile__details",children:[Object(b.jsx)("h1",{className:"profile__title",children:u.name}),Object(b.jsx)("p",{className:"profile__subtitle",children:u.about}),Object(b.jsx)("button",{className:"profile__edit-button",type:"button",onClick:c})]}),Object(b.jsx)("button",{className:"profile__add",type:"button",onClick:i})]}),Object(b.jsx)("ul",{className:"photo-grid",children:t.map((function(e){return Object(b.jsx)(g,{onCardClick:o,card:e,onCardDelete:a,onCardLike:n},e._id)}))})]})};var x=function(){return Object(b.jsx)("footer",{className:"footer",children:Object(b.jsxs)("p",{className:"footer__text",children:["\xa9 ",(new Date).getFullYear()," Mesto Russia"]})})};var f=function(e){return Object(b.jsx)("section",{onSubmit:e.onSubmit,className:"popup popup_type_".concat(e.name," ").concat(e.isOpen?"popup_active":""),children:Object(b.jsxs)("div",{className:"popup__container",children:[Object(b.jsx)("h2",{className:"popup__heading",children:e.heading}),Object(b.jsxs)("form",{className:"popup__form popup__form_edit",name:e.name,method:"post",children:[e.children,Object(b.jsx)("input",{className:"popup__button popup__save-button",type:"submit",value:e.saveButtonValue})]}),Object(b.jsx)("button",{className:"popup__close",type:"button",onClick:e.onClose})]})})};var _=function(e){return Object(b.jsx)("section",{className:"popup popup_type_image ".concat(e.card?"popup_active":""),children:Object(b.jsxs)("figure",{className:"popup__image-container",children:[Object(b.jsx)("img",{className:"popup__image",src:"".concat(e.card?e.card.link:""),alt:"".concat(e.card?e.card.name:"")}),Object(b.jsx)("figcaption",{className:"popup__image-title",children:"".concat(e.card?e.card.name:"")}),Object(b.jsx)("button",{onClick:e.onClose,className:"popup__close",type:"button"})]})})},v=n(21),C=n(10),A=n(11),N=new(function(){function e(t){Object(C.a)(this,e),this._address=t.baseUrl,this._token=t.headers.authorization}return Object(A.a)(e,[{key:"_handleResponse",value:function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status))}},{key:"_createRequest",value:function(e,t,n){var a={method:t,headers:{authorization:this._token,"Content-Type":"application/json"}};return fetch("".concat(this._address,"/").concat(e),n?Object(v.a)(Object(v.a)({},a),{},{body:JSON.stringify(n)}):a).then(this._handleResponse)}},{key:"getUserInfo",value:function(){return this._createRequest("users/me","GET")}},{key:"getInitialCards",value:function(){return this._createRequest("cards","GET")}},{key:"updateUserInfo",value:function(e){return this._createRequest("users/me","PATCH",e)}},{key:"postCard",value:function(e){return this._createRequest("cards","POST",e)}},{key:"deleteCard",value:function(e){return this._createRequest("cards/".concat(e),"DELETE")}},{key:"like",value:function(e,t){return this._createRequest("cards/likes/".concat(e),t?"PUT":"DELETE")}},{key:"editAvatar",value:function(e){return this._createRequest("users/me/avatar","PATCH",e)}}]),e}())({baseUrl:"https://mesto.nomoreparties.co/v1/cohort-24",headers:{authorization:"197e4656-d963-4ef2-94ca-2fcf60ccdd88","Content-Type":"application/json"}});var y=function(e){var t=s.a.useContext(l),n=Object(a.useState)(""),c=Object(u.a)(n,2),i=c[0],r=c[1],o=Object(a.useState)(""),d=Object(u.a)(o,2),p=d[0],j=d[1];return Object(a.useEffect)((function(){r(t.name||""),j(t.about||"")}),[t,e.isOpen]),Object(b.jsxs)(f,{onSubmit:function(t){t.preventDefault(),e.onUpdateUser({name:i,about:p})},isOpen:e.isOpen,onClose:e.onClose,name:"edit",heading:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0444\u0438\u043b\u044c",saveButtonValue:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",children:[Object(b.jsx)("input",{className:"popup__input popup__input_value_name",placeholder:"\u0418\u043c\u044f",type:"text",name:"name",id:"name",value:i,onChange:function(e){r(e.target.value)},minLength:"2",maxLength:"40",required:!0}),Object(b.jsx)("span",{className:"popup__error",id:"name-error"}),Object(b.jsx)("input",{className:"popup__input popup__input_value_title",placeholder:"\u0412\u0438\u0434 \u0434\u0435\u044f\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u0438",type:"text",name:"about",id:"title",value:p,onChange:function(e){j(e.target.value)},minLength:"2",maxLength:"200",required:!0}),Object(b.jsx)("span",{className:"popup__error",id:"title-error"})]})};var k=function(e){var t=Object(a.useState)(""),n=Object(u.a)(t,2),s=n[0],c=n[1];return Object(b.jsxs)(f,{onSubmit:function(t){t.preventDefault(),e.onUpdateAvatar({avatar:s})},isOpen:e.isOpen,onClose:e.onClose,name:"edit-avatar",heading:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0430\u0432\u0430\u0442\u0430\u0440",saveButtonValue:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",children:[Object(b.jsx)("input",{onChange:function(e){c(e.target.value)},className:"popup__input popup__input_value_avatar",type:"url",name:"avatar",id:"avatar",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435",required:!0}),Object(b.jsx)("span",{className:"popup__error",id:"avatar-error"})]})};var L=function(e){var t=Object(a.useRef)(),n=Object(a.useRef)();return Object(a.useEffect)((function(){t.current.value="",n.current.value=""}),[e.isOpen]),Object(b.jsxs)(f,{onSubmit:function(a){a.preventDefault(),e.onAddPlace({name:t.current.value,link:n.current.value})},isOpen:e.isOpen,onClose:e.onClose,name:"new-place",heading:"\u041d\u043e\u0432\u043e\u0435 \u043c\u0435\u0441\u0442\u043e",saveButtonValue:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c",children:[Object(b.jsx)("input",{ref:t,className:"popup__input popup__input_value_heading",type:"text",name:"name",id:"heading",placeholder:"\u041d\u043e\u0432\u043e\u0435 \u043c\u0435\u0441\u0442\u043e",minLength:"2",maxLength:"30",required:!0}),Object(b.jsx)("span",{className:"popup__error",id:"heading-error"}),Object(b.jsx)("input",{ref:n,className:"popup__input popup__input_value_image",type:"url",name:"link",id:"image",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435",required:!0}),Object(b.jsx)("span",{className:"popup__error",id:"image-error"})]})},I=n(16),E=n(14),S=n(27),T=n(26),w=function(e){Object(S.a)(n,e);var t=Object(T.a)(n);function n(e){var a;return Object(C.a)(this,n),(a=t.call(this,e)).state={username:"",password:""},a.handleChange=a.handleChange.bind(Object(E.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(E.a)(a)),a}return Object(A.a)(n,[{key:"handleChange",value:function(e){var t=e.target,n=t.name,a=t.value;this.setState(Object(I.a)({},n,a))}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.state.username&&this.state.password&&this.props.onLogin({password:this.state.password,email:this.state.username})}},{key:"render",value:function(){return Object(b.jsxs)("section",{className:"register",children:[Object(b.jsx)("h2",{className:"register__heading",children:"\u0412\u0445\u043e\u0434"}),Object(b.jsxs)("form",{className:"register__form",onSubmit:this.handleSubmit,method:"post",children:[Object(b.jsx)("input",{className:"register__input register__input_value_email",name:"username",value:this.state.username,onChange:this.handleChange,placeholder:"Email",type:"text",id:"username",minLength:"2",maxLength:"40",required:!0}),Object(b.jsx)("span",{className:"register__error",id:"email-error"}),Object(b.jsx)("input",{className:"register__input register__input_value_password",name:"password",value:this.state.password,onChange:this.handleChange,placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",type:"password",id:"password",minLength:"2",maxLength:"200",required:!0}),Object(b.jsx)("span",{className:"register__error",id:"password-error"}),Object(b.jsx)("input",{className:"register__button register__save-button",type:"submit",value:"\u0412\u043e\u0439\u0442\u0438"})]})]})}}]),n}(s.a.Component),B=Object(d.h)(w);var W=function(e){var t=Object(a.useState)(""),n=Object(u.a)(t,2),s=n[0],c=n[1],i=Object(a.useState)(""),o=Object(u.a)(i,2),l=o[0],d=o[1];return Object(b.jsxs)("section",{className:"register",children:[Object(b.jsx)("h2",{className:"register__heading",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(b.jsxs)("form",{className:"register__form",onSubmit:function(t){t.preventDefault(),e.onRegister({password:l,email:s})},method:"post",children:[Object(b.jsx)("input",{className:"register__input register__input_value_email",value:s,onChange:function(e){c(e.target.value)},placeholder:"Email",type:"text",name:"email",id:"email",minLength:"2",maxLength:"40",required:!0}),Object(b.jsx)("span",{className:"register__error",id:"email-error"}),Object(b.jsx)("input",{className:"register__input register__input_value_password",value:l,onChange:function(e){d(e.target.value)},placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",type:"password",name:"password",id:"password",minLength:"2",maxLength:"200",required:!0}),Object(b.jsx)("span",{className:"register__error",id:"password-error"}),Object(b.jsx)("input",{className:"register__button register__save-button",type:"submit",value:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})]}),Object(b.jsxs)("p",{className:"register__registered",children:["\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b?",Object(b.jsx)(r.b,{to:"/sign-in",className:"register__login",children:" \u0412\u043e\u0439\u0442\u0438"})]})]})},V=function(e){return Object(b.jsx)(d.b,{children:e.loggedIn?e.children:Object(b.jsx)(d.a,{to:"/sign-in"})})},G=s.a.createContext({isLoggedIn:!1}),H=function(e){var t=e.children,n=Object(a.useState)(!1),s=Object(u.a)(n,2),c=s[0],i=s[1];return Object(b.jsx)(G.Provider,{value:{isLoggedIn:c,setupLoggedIn:function(e){i(e)}},children:t})},Q=new(function(){function e(t){var n=this;Object(C.a)(this,e),this.authorization=function(e){return fetch("".concat(n._address,"/users/me"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)}}).then(n._handleResponse)},this._address=t.baseUrl}return Object(A.a)(e,[{key:"_handleResponse",value:function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status))}},{key:"register",value:function(e,t){return fetch("".concat(this._address,"/signup"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({password:e,email:t})}).then(this._handleResponse)}},{key:"login",value:function(e,t){return fetch("".concat(this._address,"/signin"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({password:e,email:t})}).then(this._handleResponse)}}]),e}())({baseUrl:"https://auth.nomoreparties.co"});var q=function(){var e=Object(a.useState)({}),t=Object(u.a)(e,2),n=t[0],s=t[1],c=Object(a.useState)(""),i=Object(u.a)(c,2),r=i[0],p=i[1],j=Object(a.useState)(!1),g=Object(u.a)(j,2),v=g[0],C=g[1],A=Object(a.useState)(!1),I=Object(u.a)(A,2),E=I[0],S=I[1],T=Object(a.useState)(!1),w=Object(u.a)(T,2),H=w[0],q=w[1],R=Object(a.useState)(null),U=Object(u.a)(R,2),P=U[0],z=U[1],F=Object(a.useState)([]),Y=Object(u.a)(F,2),D=Y[0],Z=Y[1],M=Object(a.useContext)(G),K=M.isLoggedIn,J=M.setupLoggedIn,X=Object(d.g)(),$=Object(a.useState)(!1),ee=Object(u.a)($,2),te=ee[0],ne=ee[1],ae=Object(a.useState)(!1),se=Object(u.a)(ae,2),ce=se[0],ie=se[1];function re(){q(!1),C(!1),S(!1),z(null),ne(!1)}return Object(a.useEffect)((function(){Promise.all([N.getUserInfo(),N.getInitialCards()]).then((function(e){var t=Object(u.a)(e,2),n=t[0],a=t[1];s(n),Z(a)})).catch((function(e){console.log(e)}))}),[]),Object(a.useEffect)((function(){!function(){var e=localStorage.getItem("jwt");e&&Q.authorization(e).then((function(e){e&&(J(!0),X.push("/"),p(e.data.email))})).catch((function(e){return console.log(e)}))}()}),[]),Object(b.jsx)(l.Provider,{value:n,children:Object(b.jsx)("div",{className:"page",children:Object(b.jsxs)("div",{className:"page__container",children:[Object(b.jsx)(h,{email:r,onSignOut:function(){localStorage.removeItem("jwt"),J(!1),X.push("/sign-in")}}),Object(b.jsxs)(d.d,{children:[Object(b.jsx)(d.b,{path:"/sign-up",children:Object(b.jsx)(W,{onRegister:function(e){var t=e.password,n=e.email;Q.register(t,n).then((function(){X.push("/sign-in"),ie(!0)})).catch((function(e){ie(!1),X.push("/sign-up"),console.log(e)})).finally((function(){ne(!0)}))}})}),Object(b.jsx)(d.b,{path:"/sign-in",children:Object(b.jsx)(B,{onLogin:function(e){var t=e.password,n=e.email;Q.login(t,n).then((function(e){e.token&&(localStorage.setItem("jwt",e.token),p(n),J(!0),X.push("/"))})).catch((function(e){return console.log(e)}))}})}),Object(b.jsx)(V,{exact:!0,path:"/",loggedIn:K,children:Object(b.jsx)(O,{onCardClick:function(e){z(e)},onEditProfile:function(){C(!0)},onAddPlace:function(){S(!0)},onEditAvatar:function(){q(!0)},cards:D,onCardLike:function(e){var t=e.likes.some((function(e){return e._id===n._id}));N.like(e._id,!t).then((function(t){Z((function(n){return n.map((function(n){return n._id===e._id?t:n}))}))})).catch((function(e){console.log(e)}))},onCardDelete:function(e){N.deleteCard(e._id).then((function(){Z((function(t){return Object(o.a)(t).filter((function(t){return t._id!==e._id}))}))})).catch((function(e){console.log(e)}))}})})]}),Object(b.jsx)(y,{onUpdateUser:function(e){N.updateUserInfo(e).then((function(e){s(e),re()})).catch((function(e){console.log(e)}))},isOpen:v,onClose:re}),Object(b.jsx)(L,{onAddPlace:function(e){N.postCard(e).then((function(e){Z([e].concat(Object(o.a)(D))),re()})).catch((function(e){console.log(e)}))},isOpen:E,onClose:re}),Object(b.jsx)(f,{name:"confirm",heading:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",saveButtonValue:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"}),Object(b.jsx)(k,{onUpdateAvatar:function(e){N.editAvatar(e).then((function(e){s(e),re()})).catch((function(e){console.log(e)}))},isOpen:H,onClose:re}),Object(b.jsx)(_,{card:P,onClose:re}),Object(b.jsx)(m,{isOpen:te,isSuccess:ce,onClose:re}),Object(b.jsx)(x,{})]})})})},R=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,40)).then((function(t){var n=t.getCLS,a=t.getFID,s=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),a(e),s(e),c(e),i(e)}))};i.a.render(Object(b.jsx)(r.a,{children:Object(b.jsx)(H,{children:Object(b.jsx)(q,{})})}),document.getElementById("root")),R()}},[[39,1,2]]]);
//# sourceMappingURL=main.646a32ad.chunk.js.map